<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ver Mensaje</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/admin/index.css">
    <link rel="stylesheet" href="/styles/admin/creacionmensajes.css">
    <style>
        /* Estilo adicional para el QR */
        #qrContainer {
            display: none;
            text-align: center;
            margin-top: 15px;
        }

        #qrImage {
            max-width: 220px;
            width: 100%;
            height: auto;
            display: block;
            margin: 10px auto;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
        }

        #qrImage:hover {
            transform: scale(1.08);
        }

        /* Estilo para el bot√≥n */
        #btnVerDetalles {
            display: block;
            margin: 20px auto 0;
            width: 100%;
            max-width: 300px;
            font-weight: bold;
            font-size: 1.1rem;
        }
    </style>
</head>
<body class="bg-light">

<div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="card shadow-lg border-0 rounded-4 p-4 w-50">
        <h3 class="text-primary text-center mb-3">üì© Mensaje</h3>
        <hr>
        <!-- Mensaje informativo sobre el l√≠mite de vistas -->
        <div id="infoAlert" class="alert alert-info text-center">
            Este mensaje tiene un l√≠mite de visualizaciones.  
            Si alcanzas el n√∫mero m√°ximo de vistas, deber√°s ingresar la contrase√±a para volver a verlo.
        </div>

        <p class="mb-2"><strong>T√≠tulo:</strong> <span id="messageTitle" class="text-dark"></span></p>
        <p class="mb-2">
            <strong>Vistas restantes:</strong> 
            <span id="vistasRestantes" class="badge bg-info text-dark"></span>
        </p>
        <p class="mb-2"><strong>Estado:</strong> <span id="messageStatus" class="fw-bold"></span></p>

        <!-- Contenedor QR centrado -->
        <div id="qrContainer">
            <p><strong>QR del mensaje:</strong></p>
            <div class="d-flex justify-content-center">
                <img id="qrImage" class="img-fluid" alt="C√≥digo QR">
            </div>
        </div>

        <p class="mt-3 text-center">
            <strong>Enlace del mensaje:</strong>
            <br>
            <a id="messageLink" target="_blank" class="text-decoration-none fw-bold text-primary"></a>
        </p>

        <!-- Bot√≥n para ver los detalles del mensaje -->
        <button id="btnVerDetalles" class="btn btn-success">üìñ Ver detalles del mensaje</button>

        <div id="alertVistas" class="alert alert-warning mt-3 d-none text-center" role="alert">
            ‚ö†Ô∏è Este mensaje tiene un n√∫mero limitado de visualizaciones.
        </div>
    </div>
    
</div>

<!-- Modal para contrase√±a -->
<div class="modal fade" id="modalPassword" tabindex="-1" aria-labelledby="modalPasswordLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-3 shadow">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="modalPasswordLabel">üîê Acceso Restringido</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body text-center">
                <p>Este mensaje ha alcanzado el n√∫mero m√°ximo de visualizaciones.</p>
                <p>Ingrese la contrase√±a para volver a verlo:</p>
                <input type="password" id="inputPassword" class="form-control" placeholder="Contrase√±a" required>
                <div id="errorPassword" class="text-danger mt-2 d-none">Contrase√±a incorrecta ‚ùå</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button id="btnCheckPassword" class="btn btn-primary">Validar</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/views.js" defer></script>

</body>
</html>
