<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensajes con QR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/admin/index.css">
    <link rel="stylesheet" href="/styles/admin/creacionmensajes.css">
    <script src="/js/admin/creacionmensajes.js" defer></script>
</head>

<body>
        <!-- ðŸ”˜ Switch para cambiar modo -->
    <div class="theme-toggle">
        <i class="fa-solid fa-sun"></i>
        <label class="switch">
            <input type="checkbox" id="theme-switch">
            <span class="slider round"></span>
        </label>
        <i class="fa-solid fa-moon"></i>
    </div>


    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card shadow-lg border-0 rounded-3">
                    <div class="card-body">
                        <h3>ðŸ“© Crear Mensaje</h3>
                        <form id="messageForm">
                            <div class="mb-3">
                                <label for=title" class="form-label"> Titulo Mensaje</label>
                                <textarea class="form-control" id="title" rows="3" placeholder="Escribe tu mensaje..."
                                    required></textarea>
                            </div>

                            <div class="mb-3">
                                <label for="viewsLimit" class="form-label">LÃ­mite de visualizaciones</label>
                                <input type="number" class="form-control" id="viewsLimit" min="1" value="1" required>
                            </div>

                            <div class="mb-3">
                                <label for="startDate" class="form-label">Fecha de Inicio </label>
                                <input type="datetime-local" class="form-control" id="startDate" required>
                            </div>

                            <div class="mb-3">
                                <label for="expiresAt" class="form-label">Fecha de expiraciÃ³n </label>
                                <input type="datetime-local" class="form-control" id="expiresAt" required>
                            </div>
                            <!-- Nuevo campo de contraseÃ±a -->
                            <div class="mb-3">
                                <label for="password" class="form-label">ContraseÃ±a</label>
                                <input type="password" class="form-control" id="password"
                                    placeholder="Ingresa una contraseÃ±a" minlength="4" maxlength="20" required>
                                <div class="form-text">MÃ­nimo 4 y mÃ¡ximo 20 caracteres.</div>
                            </div>
                            <!-- Nuevo campo de estado -->
                            <div class="mb-3">
                                <label for="status" class="form-label">Estado</label>
                                <select class="form-select" id="status" required>
                                    <option value="true" selected>Activo</option>
                                    <option value="false">Inactivo</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="compartido" class="form-label">Compartir mensaje</label>
                                <select class="form-select" id="compartido" required>
                                    <option value="false" selected>No compartido</option>
                                    <option value="true" >Compartido</option>
                                </select>
                            </div>

                            <!-- NUEVO CAMPO PARA ENLACE DE YOUTUBE -->
                            <div class="mb-3">
                                <label for="youtubeLink" class="form-label">Enlace de YouTube <span
                                        class="text-muted">(opcional)</span></label>
                                <input type="url" class="form-control" id="youtubeLink"
                                    placeholder="https://www.youtube.com/watch?v=XXXXXXX"
                                    pattern="https?://(www\.)?(youtube\.com|youtu\.be)/.+">
                                <div class="form-text">Ingresa un enlace vÃ¡lido de YouTube.</div>
                            </div>

                            <!-- Contenedor donde aparecerÃ¡n los mensajes -->
                            <div class="mensajes d-none mt-3"></div>


                            <!-- CONTENEDOR DEL REPRODUCTOR DE YOUTUBE -->
                            <div id="reproductorYoutubeContainer" class="text-center mt-4" style="display: none;">
                                <iframe id="youtubePlayer" width="100%" height="300" src="" title="Reproductor YouTube"
                                    frameborder="0" allow="autoplay; encrypted-media; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                            </div>


                            <button type="submit" class="btn btn-primary w-100" id="generar-qr">Generar QR</button>

                            <!-- BotÃ³n para crear detalles de mensajes -->
                            <button id="btn-crear-detalles" type="button" class="btn btn-primary w-100 d-none">
                                Crear Detalles Mensajes
                            </button>


                            <!-- Nuevos botones -->
                            <div class="d-flex justify-content-between mt-3 d-none" id="actionButtons">
                                <button id="btn-update-message" type="button" class="btn btn-success w-50 me-2">
                                    Actualizar Mensajes
                                </button>
                                <button id="btn-actualizar-detalles" type="button" class="btn btn-info w-50">
                                    Actualizar Detalles Mensajes
                                </button>
                            </div>

                        </form>

                        <div id="result" class="mt-4 d-none">
                            <h5 class="text-success">Â¡Mensaje creado! ðŸŽ‰</h5>
                            <p><strong>Enlace:</strong> <a id="messageLink" target="_blank"></a></p>
                            <img id="qrImage" alt="QR" class="img-fluid mt-2 border rounded shadow-sm">
                        </div>
                        <div id="result-edit" class="mt-4 d-none text-center">
                            <p><strong>Enlace:</strong> <a id="messageLinkEdit" target="_blank"></a></p>
                            <img id="qrImageEdit" alt="QR"
                                class="img-fluid mt-2 border rounded shadow-sm mx-auto d-block">
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

</html>